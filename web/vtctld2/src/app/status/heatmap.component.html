<table class="collapsed-border" width="100%">
  <!-- The first row with an offset to match the heatmap labels. -->
  <tr [ngStyle]="{'height': (getXLabelsRowHeight())+'px'}">
    <td class="no-padding"></td>
    <td class="no-padding"></td>
    <td class="no-padding"></td>
    <td class="no-padding" [attr.rowspan]="(getTotalRows()+1)">
      <div id="{{name}}" [ngStyle]="{'height': heatmapHeight+'px'}">
        <!-- Heatmap gets drawn in this div-->
      </div>
    </td>
  </tr>

  <!-- The labels, and nested labels, of the map are drawn -->
  <div *ngFor="let label of yLabels">

       <tr *ngFor="let num of getRemainingRows(label.CellLabel.Rowspan)" [ngStyle]="{'height': getRowHeight()+'px'}"></tr>
     </template>

    <template [ngIf]="label.TypeLabels != null">
      <template ngFor let-nestedLabel [ngForOf]="label.TypeLabels" let-firstCell="first">
        <tr [ngStyle]="{'height': getRowHeight()+'px'}">
          <td *ngIf="firstKeyspace&&firstCell" [attr.rowspan]="keyspace.Rowspan" class="bordered"> {{keyspace.Name}} </td>
          <td *ngIf="firstCell" [attr.rowspan]="label.CellLabel.Rowspan" class="bordered"> {{label.CellLabel.Name}}</td>
          <td class="bordered" [attr.rowspan]="nestedLabel.Rowspan"> {{nestedLabel.Name}}</td>
        </tr>

         <tr *ngFor="let num of getRemainingRows(nestedLabel.Rowspan)" [ngStyle]="{'height': getRowHeight()+'px'}"></tr>
      </template>
    </template>
</template>
</table>

<div *ngIf="popupReady==true" [hidden]="!showPopup" class="popup">
  <vt-tablet-popup [title]="popupTitle"
                   [data]="popupData">
  </vt-tablet-popup>
  <button md-button (click)="closePopup()"> Dismiss </button>
</div>
